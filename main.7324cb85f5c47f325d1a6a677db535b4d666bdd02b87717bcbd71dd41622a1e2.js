!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=1)}([function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(0);const n=(t,e=document)=>e.querySelector(t),r=(t,e=document)=>e.querySelectorAll(t),s=(t,e,i,n=!1)=>t.removeEventListener(e,i,n),a=(t,e,i,n=!1)=>(t.addEventListener(e,i,n),()=>s(t,e,i,n));var o=Array.prototype.reduce.call(r(".backface"),(t,e)=>{return t[e.getAttribute("id")]=e.content.querySelector("svg"),t},{});const h=[76,68,62,48];class c{constructor(t){const e=o[`backface-${t.backface}`]||o["backface-default"];this.svg=document.importNode(e,!0);const i=n("text",this.svg);i.textContent=t.number;const r=String(t.number).length,s=h[r-1];i.style.fontSize=`${s}px`,this.svgThumnbail=document.importNode(this.svg,!0),this.svgThumnbail.classList.add("preview-variant-backface")}show(){return this.svg}thumbnail(){return this.svgThumnbail}}class l{constructor(t){this.item=t,this.imgFull=new Image,this.imgFull.style.background=`url(${t.thumbnailSrc}) no-repeat center center`,this.imgFull.style.backgroundSize="contain",this.imgFull.src=t.imageSrc,this.imgThumbnail=new Image,this.imgThumbnail.src=t.thumbnailSrc}show(){return this.imgFull}thumbnail(){return this.imgThumbnail}}var d={green:"\u05d4\u05e1\u05d3\u05e8\u05d4 \u05d4\u05d9\u05e8\u05d5\u05e7\u05d4",red:"\u05d4\u05e1\u05d3\u05e8\u05d4 \u05d4\u05d0\u05d3\u05d5\u05de\u05d4",blue:"\u05d4\u05e1\u05d3\u05e8\u05d4 \u05d4\u05db\u05d7\u05d5\u05dc\u05d4",purple:"\u05d4\u05e1\u05d3\u05e8\u05d4 \u05d4\u05e1\u05d2\u05d5\u05dc\u05d4",orange:"\u05d4\u05e1\u05d3\u05e8\u05d4 \u05d4\u05db\u05ea\u05d5\u05de\u05d4",pink:"\u05d4\u05e1\u05d3\u05e8\u05d4 \u05d4\u05d5\u05e8\u05d5\u05d3\u05d4",poalim:"\u05d1\u05e0\u05e7 \u05e4\u05d5\u05e2\u05dc\u05d9\u05dd",brown:"\u05d4\u05e1\u05d3\u05e8\u05d4 \u05d4\u05d7\u05d5\u05de\u05d4",black:"\u05d4\u05e1\u05d3\u05e8\u05d4 \u05d4\u05e9\u05d7\u05d5\u05e8\u05d4 (\u05e1\u05d5\u05e0\u05d5\u05dc)",gray:"\u05d4\u05e1\u05d3\u05e8\u05d4 \u05d4\u05d0\u05e4\u05d5\u05e8\u05d4",turquoise:"\u05e1\u05d3\u05e8\u05ea \u05d4\u05d8\u05d5\u05e8\u05e7\u05d9\u05d6",psycho:"\u05e4\u05e1\u05d9\u05db\u05d9 \u05d1\u05e8\u05d9\u05d1\u05d5\u05e2",gold:"\u05e1\u05d3\u05e8\u05ea \u05d4\u05d6\u05d4\u05d1 (\u05d1\u05d0\u05d3\u05d9 \u05ea\u05e0\u05d5\u05d1\u05d4)",dominos:"\u05d4\u05e1\u05d3\u05e8\u05d4 \u05d4\u05d0\u05de\u05e8\u05d9\u05e7\u05d0\u05d9\u05ea (\u05d3\u05d5\u05de\u05d9\u05e0\u05d5'\u05e1 \u05e4\u05d9\u05e6\u05d4)","comedy-store":"\u05d4\u05e7\u05d5\u05de\u05d3\u05d9 \u05e1\u05d8\u05d5\u05e8","comedy-store-yellow":"\u05d4\u05e7\u05d5\u05de\u05d3\u05d9 \u05e1\u05d8\u05d5\u05e8 (\u05e1\u05d3\u05e8\u05d4 \u05e6\u05d4\u05d5\u05d1\u05d4)",crazies:"\u05e1\u05d3\u05e8\u05ea \u05d4\u05de\u05d5\u05d8\u05e8\u05e4\u05d9\u05dd",bushido:"\u05e2\u05e0\u05e7\u05d9 \u05d4\u05d1\u05d5\u05e9\u05d9\u05d3\u05d5",yellow:"\u05d4\u05e1\u05d3\u05e8\u05d4 \u05d4\u05e6\u05d4\u05d5\u05d1\u05d4",horospog:"\u05d4\u05d5\u05e8\u05d5\u05e1\u05e4\u05d5\u05d2"};class u{constructor(t){this.drawer=t,this.container=t.querySelector(".drawer-panel"),this.current=null,this.isOpen=!1,this.isLoading=!1,this.currentVariantIndex=0,this.open=this.open.bind(this),this.close=this.close.bind(this),this.show=this.show.bind(this),this.handleKeyUp=this.handleKeyUp.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.number=n(".preview-number",this.container),this.details=n(".preview-details",this.container),this.downloadLinkPng=n(".preview-download-png",this.container),this.downloadLinkJpg=n(".preview-download-jpg",this.container),this.imageContainer=n(".preview-image-container",this.container),this.variantsContainer=n(".preview-variants",this.container),this.variantTemplate=n(".preview-variant-template",this.container),a(this.variantsContainer,"click",this.handleVariantClick.bind(this)),a(n(".close",this.container),"click",this.close),a(n(".overlay"),"click",t=>{t.stopPropagation(),this.close()})}open(){this.isOpen||(this.drawer.classList.remove("drawer-closed"),a(document,"keyup",this.handleKeyUp),a(document,"keydown",this.handleKeyDown)),this.isOpen=!0}close(){this.isOpen&&(this.drawer.classList.add("drawer-closed"),s(document,"keyup",this.handleKeyUp),s(document,"keydown",this.handleKeyDown)),this.isOpen=!1}handleVariantClick(t){const e=t.target.closest(".preview-variant");e&&(this.currentVariantIndex=Array.prototype.indexOf.call(this.variantsContainer.children,e),this.selectVariant(this.currentVariantIndex)),t.preventDefault(),t.stopPropagation()}addVariants(t){this.maxVariantIndex=t.length-1;const e=document.createDocumentFragment();t.forEach(t=>{const i=document.importNode(this.variantTemplate.content.firstElementChild);i.appendChild(t.thumbnail()),e.appendChild(i)}),function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.variantsContainer),this.variantsContainer.appendChild(e)}selectVariant(t){const e=n(".preview-variant-selected",this.variantsContainer);e&&e.classList.remove("preview-variant-selected"),this.variantsContainer.children.item(t).classList.add("preview-variant-selected");const i=this.variants[t].show();this.imageContainer.childElementCount?this.imageContainer.firstElementChild.replaceWith(i):this.imageContainer.appendChild(i)}handleKeyUp(t){const e=this.currentVariantIndex;"Escape"!==t.key?("ArrowDown"===t.key&&(this.currentVariantIndex=Math.min(this.currentVariantIndex+1,this.maxVariantIndex)),"ArrowUp"===t.key&&(this.currentVariantIndex=Math.max(this.currentVariantIndex-1,0)),e!==this.currentVariantIndex&&this.selectVariant(this.currentVariantIndex)):this.close()}handleKeyDown(t){"ArrowDown"!==t.key&&"ArrowUp"!==t.key||t.preventDefault()}show(t){this.number.textContent=t.number,this.details.textContent=d[t.series],this.downloadLinkPng.setAttribute("href",t.originalSrc),this.downloadLinkJpg.setAttribute("href",t.imageSrc),this.variants=[new l(t),new c(t)],this.addVariants(this.variants),this.selectVariant(this.currentVariantIndex),this.open()}}class p{constructor(t,e){this.gallery=t,this.preview=e,this.items=this.buildItems(r(".pog",t)),this.pendingStep=Promise.resolve(),this.handleKeyDown=function(t,e,i=!1){let n=null,r=!0;return function(){const s=()=>{t.apply(this,arguments),n=null};i&&r&&(r=!1,s()),n||(n=setTimeout(s,e))}}(this.handleKeyDown.bind(this),50),this.step=this.step.bind(this),a(this.gallery,"click",this.handleImageClick.bind(this)),a(document,"keydown",this.handleKeyDown),a(n(".preview-image-container"),"click",t=>this.step(1)),a(n(".preview-next"),"click",t=>this.step(1)),a(n(".preview-prev"),"click",t=>this.step(-1))}buildItems(t){return Array.prototype.map.call(t,t=>({thumbnailSrc:t.getAttribute("data-thumbnail"),imageSrc:t.getAttribute("data-image"),originalSrc:t.getAttribute("href"),series:t.getAttribute("data-series"),number:t.getAttribute("data-number"),backface:t.getAttribute("data-backface"),shiny:t.getAttribute("data-shiny")}))}handleImageClick(t){const e=t.target.closest(".pog");e&&(t.preventDefault(),t.stopPropagation(),this.currentIndex=this.items.findIndex(t=>t.number===e.getAttribute("data-number")),this.preview.show(this.items[this.currentIndex]))}handleKeyDown(t){"ArrowLeft"===t.key&&this.step(1),"ArrowRight"===t.key&&this.step(-1)}step(t){this.preview.isOpen&&(this.pendingStep=this.pendingStep.then(()=>{const e=(this.currentIndex+t+this.items.length)%this.items.length;return this.currentIndex=e,this.preview.show(this.items[this.currentIndex])}))}}document.addEventListener("DOMContentLoaded",()=>{const t=n("#image"),e=new u(t);new p(n("#pogs"),e)},{once:!0})}]);